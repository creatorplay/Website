<script>
const form = document.getElementById('leadForm');
const apiBaseUrl = 'https://jet.b2bsoft.site/api';
const vendorUid = '0f759710-6ff6-44f9-bfbd-988fd8ff0c62';
const accessToken = 'uoAxK1HmDoyNFsZdAgRSWVLX55lyNUIstfuatu28wRhCPgZHfFbaOXv67XbzAxjA';

form.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const formData = {
        name: document.getElementById('fullName').value,
        phone: document.getElementById('whatsapp').value,
        email: document.getElementById('email').value,
        service: document.getElementById('service').value,
        message: document.getElementById('message').value
    };

    // Validation
    if(Object.values(formData).some(field => field.trim() === '')) {
        alert('‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡§Ç! | All fields are required!');
        return;
    }

    const whatsappMessage = `
    ‡§®‡§Æ‡§∏‡•ç‡§§‡•á *${formData.name}*,

    ‡§π‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ ‡§π‡•à! üéâ
    
    ‚ñ´Ô∏è ‡§®‡§æ‡§Æ: ${formData.name}
    ‚ñ´Ô∏è ‡§´‡§º‡•ã‡§®: ${formData.phone}
    ‚ñ´Ô∏è ‡§à‡§Æ‡•á‡§≤: ${formData.email}
    ‚ñ´Ô∏è ‡§∏‡•á‡§µ‡§æ: ${formData.service}
    ‚ñ´Ô∏è ‡§∏‡§Ç‡§¶‡•á‡§∂: ${formData.message}
    
    ‡§π‡§Æ ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü‡§™‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á! üôè
    `;

    const payload = {
        phone_number: formData.phone,
        message_body: whatsappMessage,
        contact: {
            first_name: formData.name.split(' ')[0],
            last_name: formData.name.split(' ')[1] || '',
            email: formData.email,
            country: "IN",
            language_code: "hi",
            groups: "New Leads"
        }
    };

    fetch(`${apiBaseUrl}/${vendorUid}/contact/send-message`, {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${accessToken}`,
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
    })
    .then(async response => {
        const data = await response.json();
        if (!response.ok) throw new Error(data.message || 'API Error');
        return data;
    })
    .then(data => {
        alert('‡§π‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ ‡§π‡•à! ‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™‡•ç‡§™ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç ‚úÖ');
        form.reset();
    })
    .catch(error => {
        console.error('Error:', error);
        alert(`‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≠‡•á‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}`);
    });
});
                      </script>
